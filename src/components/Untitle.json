{"openapi":"3.1.0","info":{"title":"FastAPI Project","version":"0.1.0"},"paths":{"/api/v1/example/":{"get":{"tags":["example"],"summary":"Read Example","description":"Retrieve an example.","operationId":"read_example_api_v1_example__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Example"}}}}}}},"/api/v1/organizations/":{"post":{"tags":["organizations"],"summary":"Create Organization","description":"Crea una nueva organizaci√≥n y su administrador inicial.\n\nEste endpoint solo es accesible para usuarios con el rol 'super_admin'.","operationId":"create_organization_api_v1_organizations__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewOrganizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/login/access-token":{"post":{"tags":["login"],"summary":"Login Access Token","description":"OAuth2 compatible token login, get an access token for future requests","operationId":"login_access_token_api_v1_login_access_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_access_token_api_v1_login_access_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/me":{"get":{"tags":["login"],"summary":"Read Users Me","description":"Get current user.","operationId":"read_users_me_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/areas/":{"post":{"tags":["areas"],"summary":"Create Area","description":"Create new area.","operationId":"create_area_api_v1_areas__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AreaCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Area"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/risks/":{"get":{"tags":["risks"],"summary":"Read Risks","description":"Retrieve risks with pagination, sorting, searching, and field selection.","operationId":"read_risks_api_v1_risks__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"fields","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fields"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Risk"},"title":"Response Read Risks Api V1 Risks  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["risks"],"summary":"Create Risk","description":"Create new risk.","operationId":"create_risk_api_v1_risks__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Risk"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/risks/{risk_id}":{"put":{"tags":["risks"],"summary":"Update Risk","description":"Update a risk.","operationId":"update_risk_api_v1_risks__risk_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"risk_id","in":"path","required":true,"schema":{"type":"integer","title":"Risk Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RiskUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Risk"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/risks/{risk_id}/controls/{control_id}":{"post":{"tags":["risks"],"summary":"Add Control To Risk","description":"Associate an existing control with a risk.","operationId":"add_control_to_risk_api_v1_risks__risk_id__controls__control_id__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"risk_id","in":"path","required":true,"schema":{"type":"integer","title":"Risk Id"}},{"name":"control_id","in":"path","required":true,"schema":{"type":"integer","title":"Control Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Risk"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/controls/":{"get":{"tags":["controls"],"summary":"Read Controls","description":"Retrieve controls.","operationId":"read_controls_api_v1_controls__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"fields","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fields"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Control"},"title":"Response Read Controls Api V1 Controls  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["controls"],"summary":"Create Control","description":"Create new control.","operationId":"create_control_api_v1_controls__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ControlCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Control"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/controls/{control_id}":{"put":{"tags":["controls"],"summary":"Update Control","description":"Update a control.","operationId":"update_control_api_v1_controls__control_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"control_id","in":"path","required":true,"schema":{"type":"integer","title":"Control Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ControlUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Control"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/controls/{control_id}/risks/{risk_id}":{"post":{"tags":["controls"],"summary":"Add Risk To Control","description":"Associate an existing risk with a control.","operationId":"add_risk_to_control_api_v1_controls__control_id__risks__risk_id__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"control_id","in":"path","required":true,"schema":{"type":"integer","title":"Control Id"}},{"name":"risk_id","in":"path","required":true,"schema":{"type":"integer","title":"Risk Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Control"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AdminUserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"role":{"type":"string","title":"Role"}},"type":"object","required":["id","email","full_name","role"],"title":"AdminUserResponse"},"Area":{"properties":{"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"},"organization_id":{"type":"integer","title":"Organization Id"}},"type":"object","required":["name","id","organization_id"],"title":"Area"},"AreaCreate":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"AreaCreate"},"Body_login_access_token_api_v1_login_access_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_access_token_api_v1_login_access_token_post"},"Control":{"properties":{"description":{"type":"string","title":"Description"},"type":{"type":"string","title":"Type"},"id":{"type":"integer","title":"Id"},"organization_id":{"type":"integer","title":"Organization Id"},"effectiveness_probability":{"type":"integer","title":"Effectiveness Probability"},"effectiveness_impact":{"type":"integer","title":"Effectiveness Impact"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"},"risks":{"items":{"$ref":"#/components/schemas/RiskInDB"},"type":"array","title":"Risks","default":[]}},"type":"object","required":["description","type","id","organization_id","effectiveness_probability","effectiveness_impact","reviewed_at"],"title":"Control"},"ControlCreate":{"properties":{"description":{"type":"string","title":"Description"},"type":{"type":"string","title":"Type"},"eff_prob_question_1":{"type":"number","maximum":1.5,"minimum":0.0,"title":"Eff Prob Question 1"},"eff_prob_question_2":{"type":"number","maximum":1.5,"minimum":0.3,"title":"Eff Prob Question 2"},"eff_prob_question_3":{"type":"number","maximum":1.5,"minimum":0.0,"title":"Eff Prob Question 3"},"eff_imp_question_1":{"type":"number","maximum":1.5,"minimum":0.0,"title":"Eff Imp Question 1"},"eff_imp_question_2":{"type":"number","maximum":1.5,"minimum":0.0,"title":"Eff Imp Question 2"},"eff_imp_question_3":{"type":"number","maximum":1.5,"minimum":0.0,"title":"Eff Imp Question 3"},"risk_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Risk Ids","default":[]}},"type":"object","required":["description","type","eff_prob_question_1","eff_prob_question_2","eff_prob_question_3","eff_imp_question_1","eff_imp_question_2","eff_imp_question_3"],"title":"ControlCreate"},"ControlInDB":{"properties":{"description":{"type":"string","title":"Description"},"type":{"type":"string","title":"Type"},"id":{"type":"integer","title":"Id"},"organization_id":{"type":"integer","title":"Organization Id"},"effectiveness_probability":{"type":"integer","title":"Effectiveness Probability"},"effectiveness_impact":{"type":"integer","title":"Effectiveness Impact"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"}},"type":"object","required":["description","type","id","organization_id","effectiveness_probability","effectiveness_impact","reviewed_at"],"title":"ControlInDB"},"ControlUpdate":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"eff_prob_question_1":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.0},{"type":"null"}],"title":"Eff Prob Question 1"},"eff_prob_question_2":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.3},{"type":"null"}],"title":"Eff Prob Question 2"},"eff_prob_question_3":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.0},{"type":"null"}],"title":"Eff Prob Question 3"},"eff_imp_question_1":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.0},{"type":"null"}],"title":"Eff Imp Question 1"},"eff_imp_question_2":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.0},{"type":"null"}],"title":"Eff Imp Question 2"},"eff_imp_question_3":{"anyOf":[{"type":"number","maximum":1.5,"minimum":0.0},{"type":"null"}],"title":"Eff Imp Question 3"},"risk_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Risk Ids"}},"type":"object","title":"ControlUpdate"},"Example":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"Example"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NewOrganizationResponse":{"properties":{"organization":{"$ref":"#/components/schemas/OrganizationResponse"},"admin_user":{"$ref":"#/components/schemas/AdminUserResponse"}},"type":"object","required":["organization","admin_user"],"title":"NewOrganizationResponse"},"OrganizationCreate":{"properties":{"name":{"type":"string","title":"Name"},"admin_email":{"type":"string","format":"email","title":"Admin Email"},"admin_full_name":{"type":"string","title":"Admin Full Name"}},"type":"object","required":["name","admin_email","admin_full_name"],"title":"OrganizationCreate"},"OrganizationResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","name","created_at"],"title":"OrganizationResponse"},"Risk":{"properties":{"process_name":{"type":"string","title":"Process Name"},"risk_description":{"type":"string","title":"Risk Description"},"area_id":{"type":"integer","title":"Area Id"},"id":{"type":"integer","title":"Id"},"organization_id":{"type":"integer","title":"Organization Id"},"inherent_probability":{"type":"integer","title":"Inherent Probability"},"inherent_impact":{"type":"integer","title":"Inherent Impact"},"residual_probability":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Residual Probability"},"residual_impact":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Residual Impact"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"},"controls":{"items":{"$ref":"#/components/schemas/ControlInDB"},"type":"array","title":"Controls","default":[]}},"type":"object","required":["process_name","risk_description","area_id","id","organization_id","inherent_probability","inherent_impact","residual_probability","residual_impact","reviewed_at"],"title":"Risk"},"RiskCreate":{"properties":{"process_name":{"type":"string","title":"Process Name"},"risk_description":{"type":"string","title":"Risk Description"},"area_id":{"type":"integer","title":"Area Id"},"prob_question_1":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Prob Question 1"},"prob_question_2":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Prob Question 2"},"prob_question_3":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Prob Question 3"},"imp_question_1":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Imp Question 1"},"imp_question_2":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Imp Question 2"},"imp_question_3":{"type":"integer","maximum":4.0,"minimum":1.0,"title":"Imp Question 3"},"control_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Control Ids","default":[]}},"type":"object","required":["process_name","risk_description","area_id","prob_question_1","prob_question_2","prob_question_3","imp_question_1","imp_question_2","imp_question_3"],"title":"RiskCreate"},"RiskInDB":{"properties":{"process_name":{"type":"string","title":"Process Name"},"risk_description":{"type":"string","title":"Risk Description"},"area_id":{"type":"integer","title":"Area Id"},"id":{"type":"integer","title":"Id"},"organization_id":{"type":"integer","title":"Organization Id"},"inherent_probability":{"type":"integer","title":"Inherent Probability"},"inherent_impact":{"type":"integer","title":"Inherent Impact"},"residual_probability":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Residual Probability"},"residual_impact":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Residual Impact"},"reviewed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewed At"}},"type":"object","required":["process_name","risk_description","area_id","id","organization_id","inherent_probability","inherent_impact","residual_probability","residual_impact","reviewed_at"],"title":"RiskInDB"},"RiskUpdate":{"properties":{"process_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Process Name"},"risk_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Risk Description"},"area_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Area Id"},"prob_question_1":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Prob Question 1"},"prob_question_2":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Prob Question 2"},"prob_question_3":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Prob Question 3"},"imp_question_1":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Imp Question 1"},"imp_question_2":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Imp Question 2"},"imp_question_3":{"anyOf":[{"type":"integer","maximum":4.0,"minimum":1.0},{"type":"null"}],"title":"Imp Question 3"},"control_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Control Ids"}},"type":"object","title":"RiskUpdate"},"Role":{"properties":{"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["name","id"],"title":"Role"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true},"is_superuser":{"type":"boolean","title":"Is Superuser","default":false},"organization_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Organization Id"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role","default":"user"},"id":{"type":"integer","title":"Id"},"roles":{"items":{"$ref":"#/components/schemas/Role"},"type":"array","title":"Roles","default":[]}},"type":"object","required":["email","id"],"title":"User"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/login/access-token"}}}}}}